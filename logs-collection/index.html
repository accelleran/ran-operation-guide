
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://accelleran.github.io/ran-operation-guide/logs-collection/">
      
      
        <link rel="prev" href="../nodeh-du-ru-operation/">
      
      
      
      <link rel="icon" href="../images/accelleran_favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.1">
    
    
      
        <title>Logs Collection - Accelleran 5G O-RAN System - 2023.2.0 release</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.45e1311d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#logs-collection" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Accelleran 5G O-RAN System - 2023.2.0 release" class="md-header__button md-logo" aria-label="Accelleran 5G O-RAN System - 2023.2.0 release" data-md-component="logo">
      
  <img src="../images/accelleran_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Accelleran 5G O-RAN System - 2023.2.0 release
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Logs Collection
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Operational User Guide

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../cu-configuration/" class="md-tabs__link">
        
  
    
  
  CU Configuration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../modifying-ran650-or-ran550/" class="md-tabs__link">
        
  
    
  
  DU/RU Configuration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../handover-configuration/" class="md-tabs__link">
        
  
    
  
  Handover Configuration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../mocn-and-slicing/" class="md-tabs__link">
        
  
    
  
  Multi Slice and MOCN Configuration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../nodeh-du-ru-operation/" class="md-tabs__link">
        
  
    
  
  Split 2 Cell Operation

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Logs Collection

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Accelleran 5G O-RAN System - 2023.2.0 release" class="md-nav__button md-logo" aria-label="Accelleran 5G O-RAN System - 2023.2.0 release" data-md-component="logo">
      
  <img src="../images/accelleran_logo.png" alt="logo">

    </a>
    Accelleran 5G O-RAN System - 2023.2.0 release
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational User Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cu-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CU Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modifying-ran650-or-ran550/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DU/RU Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../handover-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handover Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mocn-and-slicing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi Slice and MOCN Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodeh-du-ru-operation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Split 2 Cell Operation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Logs Collection
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Logs Collection
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-ru-logs" class="md-nav__link">
    <span class="md-ellipsis">
      1. RU Logs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-dul1-logs" class="md-nav__link">
    <span class="md-ellipsis">
      2. DU/L1 Logs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-cu-logs-and-traces" class="md-nav__link">
    <span class="md-ellipsis">
      3. CU Logs and Traces
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="logs-collection">Logs Collection<a class="headerlink" href="#logs-collection" title="Permanent link">&para;</a></h1>
<p>This section will be useful in cases were there is an issue to debug or just for cases where logs of a successful test run needs to be saved.</p>
<h2 id="1-ru-logs">1. RU Logs<a class="headerlink" href="#1-ru-logs" title="Permanent link">&para;</a></h2>
<p>As part of radio related issues debugging. Please run below commands on the radio unit while the cell is active and send the output to Accelleran with other related logs and traces.</p>
<p>(Assuming the radio IP was 10.10.0.100.)
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>root@10.10.0.100
cat<span class="w"> </span>/etc/benetel-rootfs-version
cat<span class="w"> </span>/tmp/logs/radio_status
reportRuStatus
radiocontrol<span class="w"> </span>-o<span class="w"> </span>G<span class="w"> </span>a
radiocontrol<span class="w"> </span>-o<span class="w"> </span>D<span class="w"> </span>s
</code></pre></div></p>
<h2 id="2-dul1-logs">2. DU/L1 Logs<a class="headerlink" href="#2-dul1-logs" title="Permanent link">&para;</a></h2>
<p>A directory in the DU machine with the DU/L1 logs and configuration files will be saved in the <code>/run/</code> directory with the name of the DU (which can be found from the dashboard -&gt; RAN Overview -&gt; 5G)</p>
<ul>
<li>Please compress this directory and share them with Accelleran in cases where debug is needed. Assuming du-1 was used: <code>zip -r /run/du-1/ ~/du_logs.zip</code></li>
</ul>
<h2 id="3-cu-logs-and-traces">3. CU Logs and Traces<a class="headerlink" href="#3-cu-logs-and-traces" title="Permanent link">&para;</a></h2>
<p>A tcpdump on the CU VM can be started before running the test case to save all the packets exchanged between the core &lt;-&gt; CU &lt;-&gt; DU.</p>
<ul>
<li>Below command can be used from within the CU VM.
tcpdump -i enp1s0 'sctp' -w cu_side_trace.pcap</li>
</ul>
<blockquote>
<ul>
<li>This is assuming the interface the CU VM is using is "enp1s0", please change it according to your setup.</li>
<li>It is better to save only sctp data unless the test/debug case in question is related to user plane packets otherwise use "sctp or udp" in the command.</li>
</ul>
</blockquote>
<p>To save the CU logs:</p>
<ul>
<li>Create a file named collect_logs.sh with the content below.</li>
<li>By default it will save the logs of the last 10minutes but to save the logs of the last 20mins for example, run: "<code>./collect_logs.sh 10</code>"</li>
<li>The log files will be saved in below two files: <code>/tmp/logs.tar.gz</code> and <code>/tmp/logs-previous.tar.gz</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">PODS</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-o<span class="w"> </span>name<span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">DATE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>date<span class="w"> </span>+%F_%H-%M-%S%z<span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">HOSTNAME</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>hostname<span class="k">)</span><span class="s2">&quot;</span>

<span class="nv">LOGDIR</span><span class="o">=</span><span class="s2">&quot;logs-</span><span class="si">${</span><span class="nv">HOSTNAME</span><span class="si">}</span><span class="s2">-</span><span class="si">${</span><span class="nv">DATE</span><span class="si">}</span><span class="s2">&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>

<span class="nb">set</span><span class="w"> </span>-x

<span class="k">for</span><span class="w"> </span>POD<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$PODS</span>
<span class="k">do</span>
<span class="w">    </span><span class="nv">CONTAINERS</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{range .spec.containers[*]}{.name}{&quot;\n&quot;}{end}{range .spec.initContainers[*]}{.name}{&quot;\n&quot;}{end}&#39;</span><span class="w"> </span><span class="nv">$POD</span><span class="k">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>CONTAINER<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$CONTAINERS</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">        </span><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">POD</span><span class="p">#</span><span class="s2">&quot;pod/&quot;</span><span class="si">}</span><span class="s2">-</span><span class="nv">$CONTAINER</span><span class="s2">.log&quot;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$#</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Taking last 10 minutes&quot;</span>
<span class="w">            </span>kubectl<span class="w"> </span>logs<span class="w"> </span>--since<span class="o">=</span>10m<span class="w"> </span>-c<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="nv">$POD</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$#</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]]</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Taking last </span><span class="nv">$1</span><span class="s2"> minutes&quot;</span>
<span class="w">            </span>kubectl<span class="w"> </span>logs<span class="w"> </span>--since<span class="o">=</span><span class="nv">$1</span>m-c<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="nv">$POD</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Only 1 argument is supported: #minutes to take logs&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="k">done</span>


<span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">/version.txt&quot;</span>
helm<span class="w"> </span>list<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="o">{</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods
helm<span class="w"> </span>status<span class="w"> </span>acc-5g-cu-cp
helm<span class="w"> </span>status<span class="w"> </span>acc-5g-cu-up
helm<span class="w"> </span>status<span class="w"> </span>ric
helm<span class="w"> </span>status<span class="w"> </span>cw
<span class="o">}</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>

tar<span class="w"> </span>czf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>
rm<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>

cp<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span>/tmp/logs.tar.gz


<span class="nv">LOGDIR</span><span class="o">=</span><span class="s2">&quot;logs-</span><span class="si">${</span><span class="nv">HOSTNAME</span><span class="si">}</span><span class="s2">-</span><span class="si">${</span><span class="nv">DATE</span><span class="si">}</span><span class="s2">-previous&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>

<span class="nb">set</span><span class="w"> </span>-x

<span class="k">for</span><span class="w"> </span>POD<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$PODS</span>
<span class="k">do</span>
<span class="w">    </span><span class="nv">CONTAINERS</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{range .spec.containers[*]}{.name}{&quot;\n&quot;}{end}{range .spec.initContainers[*]}{.name}{&quot;\n&quot;}{end}&#39;</span><span class="w"> </span><span class="nv">$POD</span><span class="k">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>CONTAINER<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$CONTAINERS</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">        </span><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">POD</span><span class="p">#</span><span class="s2">&quot;pod/&quot;</span><span class="si">}</span><span class="s2">-</span><span class="nv">$CONTAINER</span><span class="s2">.log&quot;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$#</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Taking last 10 minutes&quot;</span>
<span class="w">            </span>kubectl<span class="w"> </span>logs<span class="w"> </span>--since<span class="o">=</span>10m<span class="w"> </span>-c<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="nv">$POD</span><span class="w"> </span>--previous<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$#</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]]</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Taking last </span><span class="nv">$1</span><span class="s2"> minutes&quot;</span>
<span class="w">            </span>kubectl<span class="w"> </span>logs<span class="w"> </span>--since<span class="o">=</span><span class="nv">$1</span>m<span class="w"> </span>-c<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="nv">$POD</span><span class="w"> </span>--previous<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Only 1 argument is supported: #minutes to take logs&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="k">done</span>


<span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">/version.txt&quot;</span>
helm<span class="w"> </span>list<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>
<span class="o">{</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods
helm<span class="w"> </span>status<span class="w"> </span>acc-5g-cu-cp
helm<span class="w"> </span>status<span class="w"> </span>acc-5g-cu-up
helm<span class="w"> </span>status<span class="w"> </span>ric
helm<span class="w"> </span>status<span class="w"> </span>cw
<span class="o">}</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGFILE</span><span class="s2">&quot;</span>

tar<span class="w"> </span>czf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>
rm<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">&quot;</span>

cp<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$LOGDIR</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span>/tmp/logs-previous.tar.gz
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>